  <!-- Global site tag (gtag.js) - Google Analytics -->
<?php 

ini_set('display_errors','Off');

 
 
 
$data = leer_fichero_completo("n/nombres.txt");
$arrayc = explode(";",$data);
$cont = count($arrayc);

 ?>
 <!DOCTYPE html>
 <html>
 <head>
 	<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1279339354929382"
     crossorigin="anonymous"></script>
      <title>Crea tu nombre con tematica PACTO HISTORICO</title>
      <meta property="og:title" content="Crea tu nombre con tematica PACTO HISTORICO">
	 <meta property="og:image" id="img_embed" content="">
	 <meta property="og:type"  content="website">
	 <meta property="og:description" content="Crea tu nombre con tematica PACTO HISTORICO">

	 <meta name="viewport" content="width=device-width, initial-scale=1.0">
	 <meta http-equiv="Expires" content="0">
	 <meta charset="utf-8" >

	<meta http-equiv="Last-Modified" content="0">
	 
	<meta http-equiv="Cache-Control" content="no-cache, mustrevalidate">
	 
	<meta http-equiv="Pragma" content="no-cache">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
	<link rel="stylesheet" type="text/css" href="mini-default.css">
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-EK9JLKZLX0"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());

	  gtag('config', 'G-EK9JLKZLX0');
	</script>

	<style type="text/css">
	html, * {
		font-family:initial;
		    line-height: initial !important;
		    /*-webkit-text-size-adjust: 100%;*/
		}
	input[type="submit"] {
	    height: 34px;
	    cursor: pointer;
	    color: white;
	    border-radius: 20px;
	    /*padding: 10px;*/
	    border-width: 0px;
	    /* background: blue; */
	    background: rgb(22,65,148);
	    background: linear-gradient(227deg, rgba(22,65,148,1) 35%, rgba(38,96,148,1) 100%);
	}
	input[type="button"] {
	    height: 34px;
	    cursor: pointer;
	    color: white;
	    border-radius: 20px;
	    /*padding: 10px;*/
	    border-width: 0px;
	    /* background: blue; */
	    background: rgb(22,65,148);
	    background: linear-gradient(227deg, rgba(22,65,148,1) 35%, rgba(38,96,148,1) 100%);
	}
	input#name {
	    border-radius: 22px;
	    border-width: 2px;
	    border-color: #0c3ea191;
	    padding: 8px;
	}	
	.autor{
		       color: #99999924;
    position: absolute;
	}
	.box{
		    margin: 0 auto;
		    width: fit-content;
		    /* margin-left: 44px; */
		    text-align: center;
	}
	.design {
		         width: max-content;
		    padding: 64px;
		    background: #fcfeff;
		    padding-left: 6px;
		    margin: 9px;
	}
	.render.ph{
		font-size: 7em;
	    font-family: 'petroFont','Arial Black';
	    text-transform: uppercase;
	        margin-left: 59px;
	    min-width: 1000px;
	}
	.render.ml{
		 position: relative;
	    color: #952385;
	    font-size: 6em;
	    font-family: 'petroFont','Arial Black';
	    text-transform: uppercase;
	    top: 197px;
	    margin: -106px auto;
	    width: fit-content;
	}
	.mlt {
	    width: 167px;
	    padding-top: 73px;
	    /*padding-left: 67px;*/
	    display: block;
	    margin: 0 auto;
	}
	.ph {
	    width: 167px;
	    padding-top: 73px;
	    padding-left: 67px;
	    display: block;
	    margin: 0 auto;
	}
	button:hover, button:focus, [type="button"]:hover, [type="button"]:focus, [type="submit"]:hover, [type="submit"]:focus, [type="reset"]:hover, [type="reset"]:focus, a.button:hover, a.button:focus, label.button:hover, label.button:focus, .button:hover, .button:focus, a[role="button"]:hover, a[role="button"]:focus, label[role="button"]:hover, label[role="button"]:focus, [role="button"]:hover, [role="button"]:focus {
		    background: #15427a;
		}
	.letra {
		font-family: 'petroFont','Arial Black';
    	margin-left: -58px;
    	opacity: 0.9;
	}
	.letra_esp{
		margin-left: 43px;
		opacity: 0.9;
	}
	.o{
		    width: 78px;
		    margin-left: -18px;
		    z-index: 1000000000000000;
		    opacity: 0.9;
	}
	.o_d{
	        width: 78px;
		    margin-left: -19px;
		    margin-bottom: 65px;
		    z-index: 1000000000000000;
		    opacity: 0.9;
	}
	.pz{
		    position: relative;
		    top: -143px;
		    margin: 0 auto;
		    color: #ad439e;
		    font-size: 1.2em;
		    padding-left: 75px;
		    /* width: 10px; */
		    font-family: 'petroFont';
	}
	.cv{
		position: relative;
	    top: -143px;
	    letter-spacing: 4px;
	    margin: 0 auto;
	    color: #1c3587;
	    font-size: 1.2em;
	    /* width: 10px; */
	    padding-left: 51px;
	    font-family: system-ui;
	    font-weight: 700;
	}
	.ps{
		position: relative;
	    top: -143px;
	    margin: 0 auto;
	    color: #ad439e;
	    font-size: 1.2em;
	    width: 10px;
	    padding-right: 102px;
	    font-family: 'petroFont';
	}
	.comuntext{
		font-family: monospace;
	}
	.ws
	{
		    color: #ffffff;
	    /* font-weight: bold; */
	    background: #4cb720;
	    padding: 5px;
	    padding-left: 10px;
	    padding-right: 10px;
	    border-radius: 6px;
	    margin-bottom: 5px;
	}
	.med{
		 width: 158px;
	}
	.med_esp{
		 width: 76px;
	}
	.mr{
		border-radius: 50%;
	    width: 25px;
	    vertical-align: bottom;
	    padding-left: 10px;
	}
	.color_s{
		    border-radius: 10px;
	    width: 1px;
	    height: 9px;
	    cursor: pointer;
	    display: inline-flex;
	}
	.color_1{
		background: #1c3587;
	}
	.color_2{
		background: #932482;
	}
	.color_3{
		background: #00a93f;
	}
	.color_1_t{
		color: #1c3587;
	}
	.color_2_t{
		color: #932482;
	}
	.color_3_t{
		color: #00a93f;
	}
	.libre_tex_s {
	    position: relative;
	    top: -143px;
	    margin: 0 auto;
	    font-size: 1.2em;
	     padding-left: 54px;
	    font-family: 'petroFont';
	}
	.formH
	{
		    background: initial;
		    color: initial;
		    border:initial;
		    border-radius: initial;
		    margin: initial;
		    padding:initial;

	}

	input:checked + .color_s,  .color_s:hover  {
	    border-color: #ff9c00;
	    border-width: 2px;
	    border-style: solid;
	}

	.thumb{
	         height: 77px;
    width: fit-content;
    padding-left: 67px;
    padding-top: 22px;
    margin: 0 auto;
	}
	

	@font-face {
	  font-family: 'petroFont';
	  src: url('GothamBold.ttf') format('truetype');
	}
	  @media (max-width: 650px) { 
		.design{
			-webkit-transform: scale(0.4);
		}
	  
	}

	/*@media (min-width: 650px) {
	  .containerDesktop {
	    display: none !important;
	  }
	}*/

</style>
<div id="fb-root"></div>
<script>(function(d, s, id) {
var js, fjs = d.getElementsByTagName(s)[0];
if (d.getElementById(id)) return;
js = d.createElement(s); js.id = id;
js.src = "https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v3.0";
fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>
 </head>
 <body>
 	<div class="box">
 	<header>
		<br>
		 <a  class="social-btn sb-whatsapp mr-2 mb-2" target="_blank" href="https://wa.me/?text=Si desean tener su nombre estilo pactoHistorico ingresa en https://appsmr.es/pactohistorico/ ">   <i  class="fa fa-whatsapp ws"  aria-hidden="true"></i></a> 
				 <div class="fb-share-button" 
		data-href="https://appsmr.es/pactohistorico/" 
		data-layout="button_count">1
		</div> 
	 </header>
	 <!-- <img src="" class="img_nueva" style="position: absolute;   margin-left: -1000000;"> -->
	
		
		<div class="input">
			<br>
	   
	    	Plantilla:
	    <br>
	    <input type="radio" name="selectP"  id="ph" value="ph" <?php echo ($_GET['op']=="")?'checked':''; ?> <?php echo ($_GET['op']=="ph")?'checked':''; ?> >
	    <label for="ph" class="comuntext"><img class="med_esp" src="ph.png"></label>
	    <input type="radio" name="selectP"  id="ml" value="ml" <?php echo ($_GET['op']=="ml")?'checked':''; ?>>
	    <label for="ml" class="comuntext"><img class="med" src="ml.png"></label><br>
	    <input type="radio" name="selectP"  id="ps" value="ps" <?php echo ($_GET['op']=="ps")?'checked':''; ?>>
	    <label for="ps" class="comuntext"><img class="med" src="ps.png"></label>
	    <input type="radio" name="selectP"  id="cv" value="cv" <?php echo ($_GET['op']=="cv")?'checked':''; ?>>
	    <label for="cv" class="comuntext"><img class="med" src="cv.png"></label><br>
	    <input type="radio" name="selectP"  id="pz" value="pz" <?php echo ($_GET['op']=="pz")?'checked':''; ?>>
	    <label for="pz" class="comuntext"><img class="med" src="pz.png"></label><br>
	 	<input type="radio" name="selectP"  onclick="activarCampo()" id="lb" value="lb" <?php echo ($_GET['op']=="lb")?'checked':''; ?>>
	 	<span><label for="libre" class="comuntext">Mensaje: <input readonly type="text" name="libre" id="libre" value="<?php echo $_GET['text_libre']; ?>" placeholder="Mensaje libre"></label> <div class="box_color"> 

	 		<div id="frame" class="colores">
	 			<input id="color_1" class="cap_ref " style="display: none" <?php echo ($_GET['op_c']=="")?'checked':''; ?> <?php echo ($_GET['op_c']=="color_1")?'checked':''; ?> name="color" type="radio" value="color_1">
	 			<label   for="color_1" class="color_s color_1"> </label>

	 			<input id="color_2" class="cap_ref " style="display: none" <?php echo ($_GET['op_c']=="color_2")?'checked':''; ?> name="color" type="radio" value="color_2">
	 			<label   for="color_2" class="color_s color_2"> </label>

	 			<input id="color_3" class="cap_ref " style="display: none" <?php echo ($_GET['op_c']=="color_3")?'checked':''; ?> name="color" type="radio" value="color_3">
	 			<label   for="color_3" class="color_s color_3"> </label>

	 			 </div></div></span>
	 	<input type="radio" name="selectP"  id="em" value="em" <?php echo ($_GET['op']=="em")?'checked':''; ?>>
	    <label for="em" class="comuntext">Emblema: <form  class="formH" id="arch" enctype="multipart/form-data"><input type="file" id="files" name="files[]"></form></label><br>	
	    
	    <br>
		
		 <form style="width: 531px;      background: #f8f8f8;  margin: 0 auto;" onsubmit="abrir($('#name').val(),$('#libre').val(),event)">
		  <input type="text" autofocus required name="name" id="name" value="<?php echo $_GET['nombre']; ?>"   placeholder="Escribe tu nombre"> 
	    <input type="submit" value="Crear"  class="comuntext" >
	    </form>
	   
		</div>
		<div class="design" id="design">
			<div class="render ph">
			 
			</div>
			<div class="render ml mlt">
			 
			</div>
			<output class="em" id="list"></output>
			<img class='ph' src='ph.png'>
			<img class='ml' src='ml.jpg'>
			<div id="adicionalText" class=""></div>
			<div class="autor">by MR</div>	
			 	
		</div>
		
		<input type="button" class="comuntext" value="Descargar" onclick="downloadimage()">
		<br><br>
		<div class="comuntext"><?php echo $cont ?> frases se han registrado  <i class="fa fa-coffee" aria-hidden="true"></i></div>
		<br>
		<br>
		<div class="comuntext">Version 0.65</div>
		<br>
		<!-- <div  style="font-family: monospace; color: #c5c5c5;">	Cualquier inquietud escribanos a comentarios_app@outlook.com</div> -->
		<br>
		<form action="?mensaje=ok" method="post" style="width: 331px;    margin: 0 auto;">
			<label class="comuntext">Déjanos tus comentarios!</label><br>
			<textarea name="comentario"></textarea><br>
			<input type="submit" class="comuntext" value="comentar">
			<div><?php echo $_GET['m']; ?></div>
		</form>
		<br>
		<footer class="comuntext"><a href="https://www.instagram.com/mariorojas2022/">Hecho con <i style="color: #ff0006;   font-weight: 900;" class="fa fa-heart-o" aria-hidden="true"></i><img class="mr" src="mr.png"></a> <i class="fa fa-map-marker" aria-hidden="true"></i> Cali - Colombia</footer>
		
	</div>	

	<script src="jquery.min.js"></script>
	<script src="html2canvas.js"></script>
	<img src="" class="img_nueva" style="display: none">

<script type="text/javascript">

	function activarCampo(){
		var opcion_color = $('input:radio[name=selectP]:checked').val();
		if(opcion_color =="lb"){
			$('#libre').prop('readonly', false);
		}else
		{
			$('#libre').prop('readonly', true);
		}
		
	}
	function cambio(){
		var opcion = $('input:radio[name=selectP]:checked').val();

		$('.em').hide();
		if(opcion != "em"){
			$('#list').html('');
		}
		

		if(opcion == "ph" || opcion == "ps" || opcion == "cv" || opcion == "pz" || opcion == "lb" || opcion == "em"){
			$('.ph').show();
			$('.ml').hide();
			$('.ps').show();
			$('.cv').show();
			$('.pz').show();
			$('.em').show();

		}
		// if(opcion == "em"){
		// 	$('.ph').hide();
		// }
		if(opcion == "ml"){
			$('.ml').show();
			$('.ph').hide();
			$('.em').hide();
			$('.ps').hide();
			$('.cv').hide();
			$('.pz').hide();
		}
		 
	}
 
	function abrir(nombre,texto_libre,evt){
		 evt.preventDefault();

		 var cadena = $(this).serializeArray();
		var opcion = $('input:radio[name=selectP]:checked').val();
		var opcion_color = $('input:radio[name=color]:checked').val();
		const url = "?nombre="+encodeURIComponent(nombre)+"&op="+opcion+"&text_libre="+encodeURIComponent(texto_libre)+"&op_c="+opcion_color; 

		fetch(url)
		  .then( response => {
		    if(response.status == 200) {
		    	console.log("rec");
		        activarCampo();
				rev();
				convertir();
				cambio();
				
		    } else {
		      throw "Respuesta incorrecta del servidor" 
		    }
		  })
		  .catch( err => {
		    console.log(err);
		  });


		// window.open(,"_self");

	}
	function rev(){
		var opcion = $('input:radio[name=selectP]:checked').val();
		// if(opcion != "ml"){ 
			
		// }
	}
activarCampo();
rev();
convertir();
cambio();

// compilar();
	function downloadimage() {
                /*var container = document.getElementById("image-wrap");*/ /*specific element on page*/
                var container = document.getElementById("design");; /* full page */
                html2canvas(container, { allowTaint: true }).then(function (canvas) {

                    var link = document.createElement("a");
                    document.body.appendChild(link);
                    link.download = $('#name').val() +".jpg";
                    link.href = canvas.toDataURL();
                    link.target = '_blank';
                    link.click();

                });
     }

     function compilar(){
     			 var container = document.getElementById("design");; /* full page */
                html2canvas(container, { allowTaint: true }).then(function (canvas) {

                    var link = document.createElement("a");
                    document.body.appendChild(link);
                    link.download = $('#name').val() +".jpg";
                    link.href = canvas.toDataURL();
                    link.target = '_blank';
                    // link.click();
                     
                     $('.img_nueva').attr('src',link.href);
                    
                });
     }




 

 var textoA;
 function convertir(){
 	// $("#ph").prop("checked", true);
 	var opcion = $('input:radio[name=selectP]:checked').val();
 	var data =  $('#name').val();


 	$("#adicionalText").removeClass();
 	if(opcion == "pz")
 	{
 		$('#adicionalText').html("se suma al pacto por la Paz");
 		$('#adicionalText').addClass("pz");

 	}
 	if(opcion == "ps")
 	{
 		$('#adicionalText').html("#PACTOSABROSO");
 		$('#adicionalText').addClass("ps");

 	}
 	if(opcion == "cv")
 	{
 		$('#adicionalText').html("CAMBIO POR LA VIDA");
 		$('#adicionalText').addClass("cv");

 	}
 	if(opcion == "lb")
 	{
 		var opcion_color = $('input:radio[name=color]:checked').val();
 		$('#adicionalText').html($('#libre').val());
 		$('#adicionalText').addClass(opcion_color+"_t");
 		$('#adicionalText').addClass("libre_tex_s");
 	}
 	if(opcion == "ph" || opcion == "ps" || opcion == "cv" || opcion == "pz" || opcion == "lb" || opcion == "em"){
			textoA = Array.from(data);
				//amarillo, azul, rojo, verde, fuscia
				coloresE = ['#f7a600','#164194','#e41513','#32a337','#942685'];
				render = "";
				co= 0;
				// EnO = textoA.indexOf("o");
				// console.log("o:::",);
			    textoA.forEach( function(valor, indice, array) {
			      console.log(co + "::" + valor);
			      if(valor == "o" && textoA.length-1 == indice){
			      	render =  render +  "<img class='o' src='o.png'>" ;
			        $('.render').html(render);
			      }
			      else{
			      	if(valor == " "){
			      		render =  render +  "<span class='letra_esp' style='color:"+coloresE[co]+"'> "+valor+"</span>" ;
			      	}
			      	else
			      	{
			      		render =  render +  "<span class='letra' style='color:"+coloresE[co]+"'> "+valor+"</span>" ;
			      	}
			      	
			      	if(textoA.length-1 == indice){
			      	   render =  render +  "<img class='o_d' src='o.png'>" ;	
			      	}
			        $('.render').html(render);
			      }
			      co = control(co);
			  });
 	}

 	if(opcion == "ml")
 	{
 		$('.render').html(data);
 	}
 	
 	
	
	
 }
 
function control(i) { 
	r = i + 1;
	if(i == 4)
	r = 0;
    return r;
} 

function compartirImg(){
	compilar();
	u=$('.img_nueva').attr('src');
    t="";
	window.open('http://www.facebook.com/sharer.php?u='+encodeURIComponent(u)+'&t='+encodeURIComponent(t),'sharer','toolbar=0,status=0,width=626,height=436');
}

function archivo(evt) {
      var files = evt.target.files; // FileList object
 
      // Obtenemos la imagen del campo "file".
      for (var i = 0, f; f = files[i]; i++) {
        //Solo admitimos imágenes.
        if (!f.type.match('image.*')) {
            continue;
        }
 
        var reader = new FileReader();
 
        reader.onload = (function(theFile) {
            return function(e) {
              // Insertamos la imagen
             document.getElementById("list").innerHTML = ['<img class="thumb em" src="', e.target.result,'" title="', escape(theFile.name), '"/>'].join('');
            };
        })(f);
 
        reader.readAsDataURL(f);
      }
  }
 
 
 document.getElementById('files').addEventListener('change', archivo, false);

	
</script>
 </body>
 </html>



<?php 

$nombre = $_GET['nombre'];
$nombreArchivo = "n/nombres.txt";
$opd= $_GET['op'];
$op_c= $_GET['op_c'];
$text_libre= $_GET['text_libre'];
$r = ($text_libre!="")?"::".$text_libre."::".$op_c:"";
$datos= "";
if($nombre != ""){
	$datos = $datos .";".$nombre ."::".$opd.$r;
     file_put_contents($nombreArchivo, $datos, FILE_APPEND);
}

$mensaje = $_GET['mensaje'];
$comentario = $_POST['comentario'];
$nombreArchivos = "n/comentarios.txt";
if($mensaje == "ok")
{
	if($comentario != ""){
	  $datoss = $datoss ."||".$comentario ;
     file_put_contents($nombreArchivos, $datoss, FILE_APPEND);
      echo "<script>window.location.replace('http://".$_SERVER['SERVER_NAME']."?m=Gracias');</script>";
	}
}
 


function leer_fichero_completo($nombre_fichero){
   //abrimos el archivo de texto y obtenemos el identificador
   $fichero_texto = fopen ($nombre_fichero, "r");
   //obtenemos de una sola vez todo el contenido del fichero
   //OJO! Debido a filesize(), sólo funcionará con archivos de texto
   $contenido_fichero = fread($fichero_texto, filesize($nombre_fichero));
   return $contenido_fichero;
}



 ?>

 











